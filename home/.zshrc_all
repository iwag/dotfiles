############ -*- Mode: shell-script; coding: euc-jp -*- ####
# ~ippei/.zshrc
#   written by ippei.kishida@materials.mbox.media.kyoto-u.ac.jp
# last modified : 2004-08-02
# ä¿®æ­£ã€æ”¹å¤‰ã€å†é…å¸ƒä½•ã§ã‚‚å¯
# cf: man zshall, zshoptions
############################################################
#### è©•ä¾¡ç”¨ã‚¹ãƒšãƒ¼ã‚¹
#autoload -U predict-on # ã‚³ãƒãƒ³ãƒ‰ã®äºˆæ¸¬å…¥åŠ›(ãƒ’ã‚¹ãƒˆãƒªâ†’ä¸€èˆ¬è£œå®Œ)
#zle -N predict-on
#zle -N predict-off
#bindkey '^Xp' predict-on    # [C-x p] ã§æœ‰åŠ¹åŒ–
#bindkey '^X^p' predict-off  # [C-x C-p] ã§ç„¡åŠ¹åŒ–
#predict-on
# é¢ç™½ã„ã‚“ã ã‘ã©ã€ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã®å…ˆé ­ã«æˆ»ã£ã¦ç·¨é›†ã™ã‚‹ã¨ãã«ã‚«ãƒ¼ã‚½ãƒ«ä»¥é™ãŒå…¨ã¦æ¶ˆãˆã‚‹ã®ãŒé›£ç‚¹

autoload -U zmv
# % zmv '(*).jpeg' '$1.jpg'
# % zmv '(**/)foo(*).jpeg' '$1bar$2.jpg'
# % zmv -n '(**/)foo(*).jpeg' '$1bar$2.jpg' # å®Ÿè¡Œã›ãšãƒ‘ã‚¿ãƒ¼ãƒ³è¡¨ç¤ºã®ã¿
# % zmv '(*)' '${(L)1}; # å¤§æ–‡å­—â†’å°æ–‡å­—
# % zmv -W '*.c.org' 'org/*.c' #ã€Œ(*)ã€ã€Œ$1ã€ã‚’ã€Œ*ã€ã§æ¸ˆã¾ã›ã‚‰ã‚Œã‚‹
alias mmv='noglob zmv -W'  # å¼•æ•°ã®ã‚¯ã‚©ãƒ¼ãƒˆã‚‚é¢å€’ãªã®ã§
# % mmv *.c.org org/*.c
#zmv -C # ç§»å‹•ã§ã¯ãªãã‚³ãƒ”ãƒ¼(zcp ã¨ã—ã¦ä½¿ã†æ–¹æ³•ã‚‚ã‚ã‚‹ã¿ãŸã„ã ã‘ã©)
#zmv -L # ç§»å‹•ã§ã¯ãªããƒªãƒ³ã‚¯(zln ã¨ã—ã¦ä½¿ã†æ–¹æ³•ã‚‚ã‚ã‚‹ã¿ãŸã„ã ã‘ã©)

zstyle ':completion:*' use-compctl false # compctlå½¢å¼ã‚’ä½¿ç”¨ã—ãªã„

# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã‚‚ãƒ¦ãƒ¼ã‚¶åã¯ /etc/passwd ã‹ã‚‰ã€ãƒ›ã‚¹ãƒˆåã¯ /etc/hosts ã‹ã‚‰> è£œå®Œå€™è£œã‚’æŒã£ã¦ãã‚‹
#zstyle ':completion:*' users-hosts bar:foo.example.com funa@daemon
 
############################################################
# tcsh é¢¨å‘³ã®å˜èªå‰Šé™¤
#tcsh-backward-delete-word () {
    #local WORDCHARS="${WORDCHARS:s#/#}"
    #zle backward-delete-word
#}
#zle -N tcsh-backward-delete-word # é–¢æ•°ã‚’ widget ã«å¤‰ãˆã¦
#bindkey '^W' tcsh-backward-delete-word # bindkey ã§å‰²å½“ã¦ã‚‹

# å˜èªå˜ä½ã§ã®ãƒãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¹
#export WORDCHARS='*?_.[]~=&;!#$%^(){}<>'
#bindkey "^[h" backward-kill-word

# redo

#     $ bindkey G backward-kill-word
#     "^W" backward-kill-word
#     "^[^H" backward-kill-word
#     "^[^?" backward-kill-word

# ãƒ¡ãƒ¢
# cd -[tab] ã§ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚¹ã‚¿ãƒƒã‚¯ã‚’å‘¼ã³å‡ºã›ã‚‹
# <1-20> ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ
# ESC C-h ã§åŒºåˆ‡ã‚Šæ–‡å­—ã¾ã§ã®ãƒãƒƒã‚¯ã‚¹ãƒšãƒ¼ã‚¹
# killallã‚³ãƒãƒ³ãƒ‰
# ***/ ã‚·ãƒ ãƒªãƒ³ã‚¯ã‚’è¾¿ã‚‹
# C-x g ãƒ¯ã‚¤ãƒ«ãƒ‰ã‚«ãƒ¼ãƒ‰å±•é–‹çµæœã‚’ã¿ã‚‹
# a=aiueo; echo $a[1] # é…åˆ—ã®æ‰±ã„
# setopt multios(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)ã§è¤‡æ•°ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã€ãƒ‘ã‚¤ãƒ—(ã€Œls > 1.txt > 2.txt | lessã€)

#### ä»¥ä¸‹ã«æ›¸ã‹ã‚Œã¦ãªã„ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã¯ man zshzle ã® STANDARD WIDGETS ã‚’å‚ç…§
# ESC-q (push-line)ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚¹ã‚¿ãƒƒã‚¯
# C-x C-x       (exchange-point-and-mark)C-SPACE ã§ãƒãƒ¼ã‚¯ã—ãŸå€‹æ‰€ã«ã‚¸ãƒ£ãƒ³ãƒ—
# ESC-T (transpose-words)å¼•æ•°ã®å‰å¾Œäº¤æ›
# ESC-. (insert-last-word)ç›´å‰ã‚³ãƒãƒ³ãƒ‰ã®æœ€å¾Œã®å¼•æ•°ã‚’å‘¼ã³å‡ºã™(ç¹°ã‚Šè¿”ã—ä½¿ãˆã‚‹)ã€ç’°å¢ƒå¤‰æ•° _ ã‚‚åŒæ§˜
# ESC-U (up-case-word)ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã€œå˜èªçµ‚ç«¯ã¾ã§ã‚’å¤§æ–‡å­—ã«å¤‰æ›´
# ESC-L (down-case-word)ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã€œå˜èªçµ‚ç«¯ã¾ã§ã‚’å°æ–‡å­—ã«å¤‰æ›´
# ESC-' (quote-line)ã‚³ãƒãƒ³ãƒ‰è¡Œå…¨ä½“ã‚’ 'ã€œ' ã§æ‹¬ã‚‹
# ESC-" (quote-region)ãƒãƒ¼ã‚¯ã—ãŸä½ç½®ã€œã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‚’ 'ã€œ' ã§æ‹¬ã‚‹
# (æœªå‰²å½“ã¦)      (expand-cmd-path)ã‚³ãƒãƒ³ãƒ‰ã‚’ãƒ•ãƒ«ãƒ‘ã‚¹ã«å±•é–‹
# C-x C-=       (what-cursor-position)ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã«ã‚ã‚‹æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’8ã€10ã€16é€²è¡¨ç¤ºã€ã‚«ãƒ¼ã‚½ãƒ«ä½ç½®ã‚’è¡¨ç¤º
# C-[   ESC ã¨ç­‰ä¾¡
# ESC-n (digit-argument)ã‚­ãƒ¼å…¥åŠ›ã®å›æ•°æŒ‡å®š(ä¾‹ï¼š[ESC-4][ESC-0]-)
# ESC C-_       (copy-prev-word)ã‚«ãƒ¼ã‚½ãƒ«ã®å·¦ã«ã‚ã‚‹å˜èªã‚’ã‚³ãƒ”ãƒ¼ã—ã¦ãƒšãƒ¼ã‚¹ãƒˆã™ã‚‹
# C-x C-o       (overwrite-mode)æŒ¿å…¥â†â†’ä¸Šæ›¸ã®ãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆ

# å€‹äººçš„ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã«ä½¿ãˆã‚‹ C-ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰
# C-o, C-q, C-s
# C-c, C-g ã¯å…¥åŠ›ä¸­ã®ã‚³ãƒãƒ³ãƒ‰ãŒæ¶ˆãˆã¦ã—ã¾ã†ã®ã‚’ä½•ã¨ã‹ã™ã‚‹
# C-i   TAB ã§ã„ã„
# C-w   è¦æ”¹è‰¯
# C-v   ç‰¹æ®Šæ–‡å­—ã‚’ç½®ãã€‚C-v C-i ãªã‚‰ã‚¿ãƒ–æ–‡å­—ã€C-v C-j ãªã‚‰æ”¹è¡Œæ–‡å­—ã‚’ç½®ã‘ã‚‹
# C-x ç³»ã‚³ãƒãƒ³ãƒ‰ã‚’èª¿ã¹ã‚‹ã€‚(C-x g ã¿ãŸã„ãª)
# â– C-t ã®æ–‡å­—å…¥ã‚Œã‹ãˆã¯ä½¿ã„å‹æ‰‹ãŒè‰¯ããªã„ã®ã§ã„ã‚‰ãªã„ â†’ screen ã«ä½¿ç”¨
#### C-j or C-m ã©ã¡ã‚‰ã‹ã§è‰¯ã„ã€‚â†’ã‚ã‘ã§ã¯ãªã„ã€‚skkinput ã§ C-j ã‚’ä½¿ã†

#### ãƒ¡ãƒ¼ãƒ«ãƒã‚§ãƒƒã‚¯
## autoload -U colors; colors   # â†“ã®ãŸã‚ã«ã€‚è¨­å®šã—ã¦ãªã‘ã‚Œã°ã—ã¦ãŠã
# MAILCHECK=300                 # 300ç§’æ¯ã«ãƒã‚§ãƒƒã‚¯
## MAILPATH="/var/mail$USER"    # ãƒã‚§ãƒƒã‚¯ã™ã‚‹ãƒ¡ãƒ¼ãƒ«ãƒœãƒƒã‚¯ã‚¹
# MAILPATH="/var/mail$USER?{fg[red]}New mail"   # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨è‰²ã‚’å¤‰æ›´

## --enable-maildir-support ã‚’æŒ‡å®šã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚Œã°Maildir å½¢å¼ã§ã‚‚å¯èƒ½
# MAILPATH="$HOME/Maildir?{fg_bold[red]}New mail in $_" # ã€Œ$_ã€ã¯å¤‰æ›´ã•ã‚ŒãŸfile
## : ã§åŒºåˆ‡ã‚Œã°è¤‡æ•°ã®ãƒ¡ãƒ¼ãƒ«ã‚¹ãƒ—ãƒ¼ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯ã§ãã‚‹
# MAILPATH="$HOME/Maildir?{fg_bold[red]}New mail in $_:$HOME/Maildir-foo?{fg_bold[green]}New mail in $_:"

############################################################
# ç’°å¢ƒå¤‰æ•°ã¯ä¸»ã« ~/.zshenv ã«è¨˜è¿°
# ~/.zshrc ã«è¨˜è¿°ã™ã‚‹ã®ã¯ã€ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ã‚·ã‚§ãƒ«ã¨ã—ã¦ã®è¨­å®š

if [ $TERM = "screen"  ] || [ $SCREEN = 1 ]; then
	stty erase "^?"
fi

autoload -U colors; colors      # ${fg[red]}å½¢å¼ã®ã‚«ãƒ©ãƒ¼æ›¸å¼ã‚’æœ‰åŠ¹åŒ–

hosts=( localhost `hostname` )
#printers=( lw ph clw )
umask 002
cdpath=( ~ )                    # cd ã®ã‚µãƒ¼ãƒãƒ‘ã‚¹

# for zsh-completions
typeset -U path cdpath fpath manpath  # ãƒ‘ã‚¹ã®é‡è¤‡ã‚’çœãæŒ‡å®š
path=(/usr/local/bin(N-/) /bin(N-/) /usr/sbin(N-/) /sbin(N-/) /usr/bin(N-/) ${path})
export PATH 
fpath=(/usr/local/share/zsh-completions(N-/) ${fpath})

# ã‚«ãƒ¬ãƒ³ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«å€™è£œãŒãªã„å ´åˆã®ã¿ cdpath ä¸Šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å€™è£œ
zstyle ':completion:*:cd:*' tag-order local-directories path-directories
# cf. zstyle ':completion:*:path-directories' hidden true
# cf. cdpath ä¸Šã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã¯è£œå®Œå€™è£œã‹ã‚‰å¤–ã‚Œã‚‹

## è£œå®Œæ™‚ã«å¤§å°æ–‡å­—ã‚’åŒºåˆ¥ã—ãªã„
zstyle ':completion:*' matcher-list 'm:{a-z}={A-Z}'

#### history
HISTFILE="$HOME/.zhistory"      # å±¥æ­´ãƒ•ã‚¡ã‚¤ãƒ«
HISTSIZE=10000           # ãƒ¡ãƒ¢ãƒªä¸Šã«ä¿å­˜ã•ã‚Œã‚‹ $HISTFILE ã®æœ€å¤§ã‚µã‚¤ã‚ºï¼Ÿ
SAVEHIST=100000                  # ä¿å­˜ã•ã‚Œã‚‹æœ€å¤§å±¥æ­´æ•°

#### option, limit, bindkey
setopt extended_history         # ã‚³ãƒãƒ³ãƒ‰ã®é–‹å§‹æ™‚åˆ»ã¨çµŒéæ™‚é–“ã‚’ç™»éŒ²
setopt hist_ignore_dups         # ç›´å‰ã®ã‚³ãƒãƒ³ãƒ‰ã¨åŒä¸€ãªã‚‰ã°ç™»éŒ²ã—ãªã„
setopt hist_ignore_all_dups     # ç™»éŒ²æ¸ˆã‚³ãƒãƒ³ãƒ‰è¡Œã¯å¤ã„æ–¹ã‚’å‰Šé™¤
setopt hist_reduce_blanks # ä½™åˆ†ãªç©ºç™½ã¯è©°ã‚ã¦ç™»éŒ²(ç©ºç™½æ•°é•ã„ç™»éŒ²ã‚’é˜²ã)
#setopt append_history  # zsh ã‚’çµ‚äº†ã•ã›ãŸé †ã«ãƒ•ã‚¡ã‚¤ãƒ«ã«è¨˜éŒ²(ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ)
#setopt inc_append_history # åŒä¸Šã€ãŸã ã—ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã—ãŸæ™‚ç‚¹ã§è¨˜éŒ²
setopt share_history    # ãƒ’ã‚¹ãƒˆãƒªã®å…±æœ‰ã€‚(appendç³»ã¨ç•°ãªã‚Šå†èª­ã¿è¾¼ã¿ä¸è¦ã€ã“ã‚Œã‚’è¨­å®šã™ã‚Œã° append ç³»ã¯ä¸è¦)
setopt hist_no_store            # historyã‚³ãƒãƒ³ãƒ‰ã¯ç™»éŒ²ã—ãªã„
setopt hist_ignore_space # ã‚³ãƒãƒ³ãƒ‰è¡Œå…ˆé ­ãŒç©ºç™½ã®æ™‚ç™»éŒ²ã—ãªã„(ç›´å¾Œãªã‚‰ã°å‘¼ã¹ã‚‹)


setopt list_packed              # è£œå®Œå€™è£œãƒªã‚¹ãƒˆã‚’è©°ã‚ã¦è¡¨ç¤º
setopt print_eight_bit          # è£œå®Œå€™è£œãƒªã‚¹ãƒˆã®æ—¥æœ¬èªã‚’é©æ­£è¡¨ç¤º
#setopt menu_complete  # 1å›ç›®ã®TAB ã§è£œå®Œå€™è£œã‚’æŒ¿å…¥ã€‚è¡¨ç¤ºã ã‘ã®æ–¹ãŒå¥½ã
setopt no_clobber               # ä¸Šæ›¸ããƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆã®ç¦æ­¢
setopt no_unset                 # æœªå®šç¾©å¤‰æ•°ã®ä½¿ç”¨ã®ç¦æ­¢
setopt no_hup                   # logoutæ™‚ã«ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¸ãƒ§ãƒ–ã‚’ kill ã—ãªã„
setopt no_beep                  # ã‚³ãƒãƒ³ãƒ‰å…¥åŠ›ã‚¨ãƒ©ãƒ¼ã§BEEPã‚’é³´ã‚‰ã•ãªã„

setopt extended_glob            # æ‹¡å¼µã‚°ãƒ­ãƒ–
setopt numeric_glob_sort        # æ•°å­—ã‚’æ•°å€¤ã¨è§£é‡ˆã—ã¦æ˜‡é †ã‚½ãƒ¼ãƒˆã§å‡ºåŠ›
setopt correct                  # ã‚¹ãƒšãƒ«ãƒŸã‚¹è£œå®Œ
setopt no_checkjobs             # exit æ™‚ã«ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¸ãƒ§ãƒ–ã‚’ç¢ºèªã—ãªã„
#setopt ignore_eof              # C-dã§logoutã—ãªã„(C-dã‚’è£œå®Œã§ä½¿ã†äººç”¨)
setopt pushd_to_home        # å¼•æ•°ãªã—pushdã§$HOMEã«æˆ»ã‚‹(ç›´å‰dirã¸ã¯ cd - ã§)
setopt pushd_ignore_dups        # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚¹ã‚¿ãƒƒã‚¯ã«é‡è¤‡ã™ã‚‹ç‰©ã¯å¤ã„æ–¹ã‚’å‰Šé™¤
#setopt pushd_silent   # pushd, popd ã®åº¦ã«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚¹ã‚¿ãƒƒã‚¯ã®ä¸­èº«ã‚’è¡¨ç¤ºã—ãªã„
setopt auto_cd # ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã ã‘ã§cdã™ã‚‹
setopt interactive_comments     # ã‚³ãƒãƒ³ãƒ‰å…¥åŠ›ä¸­ã®ã‚³ãƒ¡ãƒ³ãƒˆã‚’èªã‚ã‚‹
#setopt rm_star_silent          # rm * ã§æœ¬å½“ã«è‰¯ã„ã‹èã‹ãšã«å®Ÿè¡Œ
#setopt rm_star_wait            # rm * ã®æ™‚ã« 10ç§’é–“ä½•ã‚‚ã—ãªã„
#setopt chase_links             # ãƒªãƒ³ã‚¯å…ˆã®ãƒ‘ã‚¹ã«å¤‰æ›ã—ã¦ã‹ã‚‰å®Ÿè¡Œã€‚
# setopt sun_keyboard_hack      # SUNã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã§ã®é »å‡º typo ` ã‚’ã‚«ãƒãƒ¼ã™ã‚‹

setopt auto_pushd # cd ã—ãŸã‚‰è‡ªå‹•çš„ã«pushdã™ã‚‹


setopt hist_save_nodups # ãƒ’ã‚¹ãƒˆãƒªãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ã™ã‚‹ã¨ãã€ã™ã§ã«é‡è¤‡ã—ãŸã‚³ãƒãƒ³ãƒ‰ãŒã‚ã£ãŸã‚‰å¤ã„æ–¹ã‚’å‰Šé™¤ã™ã‚‹
setopt hist_reduce_blanks # ãƒ’ã‚¹ãƒˆãƒªã«ä¿å­˜ã™ã‚‹ã¨ãã«ä½™åˆ†ãªã‚¹ãƒšãƒ¼ã‚¹ã‚’å‰Šé™¤ã™ã‚‹

setopt auto_menu # è£œå®Œå€™è£œãŒè¤‡æ•°ã‚ã‚‹ã¨ãã«è‡ªå‹•çš„ã«ä¸€è¦§è¡¨ç¤ºã™ã‚‹
 

setopt print_eight_bit # æ—¥æœ¬èªãƒ•ã‚¡ã‚¤ãƒ«åã‚’è¡¨ç¤ºå¯èƒ½ã«ã™ã‚‹
 
# ãƒ•ãƒ­ãƒ¼ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«ã‚’ç„¡åŠ¹ã«ã™ã‚‹
setopt no_flow_control
 
# è‰²ã‚’ä½¿ç”¨å‡ºæ¥ã‚‹ã‚ˆã†ã«ã™ã‚‹
autoload -Uz colors
colors

limit   coredumpsize    0       # ã‚³ã‚¢ãƒ•ã‚¡ã‚¤ãƒ«ã‚’åã‹ãªã„ã‚ˆã†ã«ã™ã‚‹

stty    erase   '^H'
stty    intr    '^C'
stty    susp    '^Z'

#### bindkey
# bindkey "å‰²å½“ã¦ãŸã„ã‚­ãƒ¼" å®Ÿè¡Œã•ã›ã‚‹æ©Ÿèƒ½ã®åå‰
bindkey -e    # emacs é¢¨ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰(ç’°å¢ƒå¤‰æ•° EDITOR ã‚‚åæ˜ ã™ã‚‹ãŒã€ã“ã£ã¡ãŒå„ªå…ˆ)
bindkey '^I'    complete-word   # complete on tab, leave expansion to _expand

bindkey '^P' history-beginning-search-backward # å…ˆé ­ãƒãƒƒãƒã®ãƒ’ã‚¹ãƒˆãƒªã‚µãƒ¼ãƒ
bindkey '^N' history-beginning-search-forward # å…ˆé ­ãƒãƒƒãƒã®ãƒ’ã‚¹ãƒˆãƒªã‚µãƒ¼ãƒ

# run-help ãŒå‘¼ã°ã‚ŒãŸæ™‚ã€zsh ã®å†…éƒ¨ã‚³ãƒãƒ³ãƒ‰ã®å ´åˆã¯è©²å½“ã™ã‚‹ zsh ã®ãƒãƒ‹ãƒ¥ã‚¢ãƒ«è¡¨ç¤º
[ -n "`alias run-help`" ] && unalias run-help
autoload run-help

#### completion
#_cache_hosts=(`perl -ne  'if (/^([a-zA-Z0-9.-]+)/) { print "$1\n";}' ~/.ssh/known_hosts`)
# â†‘(_cache_hosts) ~/.ssh/known_hosts ã‹ã‚‰è‡ªå‹•çš„ã«å–å¾—ã™ã‚‹
_cache_hosts=($HOST localhost)
autoload -U compinit; compinit -u
compdef _tex platex             # platex ã« .tex ã‚’


############################################################
## ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­å®š
#unsetopt promptcr       # æ”¹è¡Œã®ãªã„å‡ºåŠ›ã‚’ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã§ä¸Šæ›¸ãã™ã‚‹ã®ã‚’é˜²ã
#setopt prompt_subst             # ESCã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã‚’æœ‰åŠ¹ã«ã™ã‚‹

if [ $TERM = "screen" ] || [ $SCREEN = 1 ]; then
	stty erase "^?"
fi

#if [ $TERM = "kterm-color" ] || [ $TERM = "xterm" ]; then
#if [ $COLORTERM = 1 ]; then
#  if [ $UID = 0 ] ; then 
#    PSCOLOR='00;04;31'  # ç´°å­—;ä¸‹ç·š;èµ¤
#  else
#    PSCOLOR='00;04;32'  # ç´°å­—;ä¸‹ç·š;ç·‘
#  fi
##    RPROMPT=$'%{\e[${PSCOLOR}m%}[%~]%{\e[00m%}'        # å³ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
#  RPS1=$'%{\e[${PSCOLOR}m%}[%~]%{\e[00m%}'      # å³ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
#  PS1=$'%{\e]2; %m:%~ \a'$'\e]1;%%: %~\a%}'$'\n%{\e[${PSCOLOR}m%}%n@%m ${WINDOW:+"[$WINDOW]"}%#%{\e[00m%} '
#fi
# 1å€‹ç›®ã® $'...' ã¯ ã€Œ\e]2;ã€Œkterm ã®ã‚¿ã‚¤ãƒˆãƒ«ã€\aã€
# 2å€‹ç›®ã® $'...' ã¯ ã€Œ\e]1;ã€Œã‚¢ã‚¤ã‚³ãƒ³ã®ã‚¿ã‚¤ãƒˆãƒ«ã€\aã€
# 3å€‹ç›®ã® $'...' ãŒãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

# \e ã‚’ ESC ã‚³ãƒ¼ãƒ‰()ç¸ºã‚¡é„‚ãƒ§ç¸ºä¸ã‚½ãƒ²âˆšâ€²ç¸ºã‚…ï½‹ç¸ºä¹ï½‚
# emacs ã€ãƒŒã€ãƒ C-q ESC, vi ã€ãƒŒã€ãƒ C-v ESC ã€ãƒŒãƒ‹å‘‚å¢#       \e[00m  åˆæœŸçŠ¶æ…‹ã¸
#       \e[01m  å¤ªå­—     (0ã¯çœç•¥å¯èƒ½ã£ã½ã„)
#       \e[04m  ã‚¢ãƒ³ãƒ€ãƒ¼ãƒ©ã‚¤ãƒ³
#       \e[05m  blink(å¤ªå­—)
#       \e[07m  åè»¢
#       \e[3?m  æ–‡å­—è‰²ã‚’ã‹ãˆã‚‹
#       \e[4?m  èƒŒæ™¯è‰²ã‚’ã‹ãˆã‚‹
#               ?= 0:é»’, 1:èµ¤, 2:ç·‘, 3:é»„, 4:é’, 5:ç´«, 6:ç©º, 7:ç™½

############################################################
## alias & function

#### PAGER
alias less="$PAGER"
alias m="$PAGER"
alias -g L="| $PAGER"
alias -g M="| $PAGER"
alias les="less"        # for typo

#### ps
if [ $ARCHI = "irix" ]; then
  alias psa='ps -ef'
else; 
  alias psa='ps auxw'
fi
function pst() {                # CPU ä½¿ç”¨ç‡ã®é«˜ã„æ–¹ã‹ã‚‰8ã¤
  psa | head -n 1
  psa | sort -r -n +2 | grep -v "ps -auxww" | grep -v grep | head -n 8
}
function psm() {                # ãƒ¡ãƒ¢ãƒªå æœ‰ç‡ã®é«˜ã„æ–¹ã‹ã‚‰8ã¤
  psa | head -n 1
  psa | sort -r -n +3 | grep -v "ps -auxww" | grep -v grep | head -n 8
}
function psg() {
  psa | head -n 1
  psa | grep $* | grep -v "ps -auxww" | grep -v grep
}

#### ls
#### dircolor
if [ -x `where gnuls` ]; then
  alias ls="gnuls -F --color=auto --show-control-char"
  alias lscolor='gnuls -F --color=always --show-control-char'
  # è£œå®Œãƒªã‚¹ãƒˆã‚’ã‚«ãƒ©ãƒ¼åŒ–
  zstyle ':completion:*:default' list-colors ${(s.:.)LS_COLORS}
  #zstyle ':completion:*' list-colors ${(s.:.)LS_COLORS} ã§ã‚‚è‰¯ã•ã’
elif [ $ARCHI = "linux" ]; then
  alias ls="ls -F --color=auto --show-control-char"
  alias lscolor='ls -F --color=always --show-control-char'
  # è£œå®Œãƒªã‚¹ãƒˆã‚’ã‚«ãƒ©ãƒ¼åŒ–
  zstyle ':completion:*:default' list-colors ${(s.:.)LS_COLORS}
else
fi
alias kls='ls'
alias qls='ls' # Shift-PageUp ã‚’æŠœã‘ã‚‹ã®ã«ã¤ã„ q ã‚’æ‰“ã£ã¦ã—ã¾ã†ã®ã‚’å›é¿
alias sl='ls'
alias s='ls'
alias lf='ls'
alias l='ls'
alias la='ls -a'
alias ll='ls -al'
function lsl() { lscolor $* | less }
function lll() { lscolor -la $* | less }

#### command
alias du='du -k'
alias mv='mv -iv'
#alias  memo    'skkfep -viesc -e jvim3 ~/memo.txt'
function kterm() { /usr/X11R6/bin/kterm -sb -sl 500 -km euc -title kterm@$HOST $* & }
function mlterm() { /usr/X11R6/bin/mlterm $* & }
#alias mnews='mnews -m'
alias xcalc='xcalc &'
alias xterm='xterm &'
alias w3m='w3m -X'
alias xinit='ssh-agent xinit'
alias bell="echo '\a'"
alias scr="screen -R"
alias view="vim -R"

# short name
alias h='head'
alias t='tail'
alias g='grep'
alias c='cat'
alias j='jobs'
#alias w='wc'   w ã¯ w ã®ã¾ã¾ä½¿ã†ã€‚

## global alias
alias -g H='| head'
alias -g T='| tail'
alias -g G='| grep'
alias -g C='| cat -n'
alias -g W='| wc'
#alias -g S='| sed'
#alias -g A='| awk'
alias -g ....='../..'

function cd() { builtin cd $@ && ls; }
alias cd..='cd ..'
alias cd../='cd ..'
function gv() { command gv $* & }
function hgrep() { history | grep $@ }

#iwakami wrote grep via satoru takabayashif
function grep { command grep --color=tty "$@" }
function dola { command docker ps -l -q } 

function rm() {
  if [ -d ~/.trash ]; then
    local DATE=`date "+%y%m%d-%H%M%S"`
    mkdir ~/.trash/$DATE
    for i in $@; do
      # å¯¾è±¡ãŒ ~/.trash/ ä»¥ä¸‹ãªãƒ•ã‚¡ã‚¤ãƒ«ãªã‚‰ã° /bin/rm ã‚’å‘¼ã³å‡ºã—ãŸã„ãª
      if [ -e $i ]; then
        mv $i ~/.trash/$DATE/
      else 
        echo "$i : not found"
      fi
    done
  else
    /bin/rm -i $@
  fi
}

function euc() {                # æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’ euc-jp ã«å¤‰æ›
  for i in $@; do;
    nkf -e -Lu $i >! /tmp/euc.$$ # -Lu :æ”¹è¡Œã‚’ LF ã«ã™ã‚‹
    mv -f /tmp/euc.$$ $i
  done;
}

function sjis() {               # æ–‡å­—ã‚³ãƒ¼ãƒ‰ã‚’ shift-jis ã«å¤‰æ›
  for i in $@; do;
    nkf -s -Lw $i >! /tmp/euc.$$ # -Lu :æ”¹è¡Œã‚’ CRLF ã«ã™ã‚‹
    mv -f /tmp/euc.$$ $i
  done;
}

#### time
REPORTTIME=8                    # CPUã‚’8ç§’ä»¥ä¸Šä½¿ã£ãŸæ™‚ã¯ time ã‚’è¡¨ç¤º
TIMEFMT="\
    The name of this job.             :%J
    CPU seconds spent in user mode.   :%U
    CPU seconds spent in kernel mode. :%S
    Elapsed time in seconds.          :%E
    The  CPU percentage.              :%P"


############################################################
## å€‹äººæƒ…å ±ã‚’å«ã‚€è¨­å®š
if [ -e ~/.zshrc_private ]; then
  source ~/.zshrc_private
fi
#### end of ~ippei/.zshrc #########################################

